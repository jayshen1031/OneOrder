<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>客服接单管理 - OneOrder系统</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0066cc;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        .navbar-brand {
            font-weight: bold;
            color: var(--primary-color) !important;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 25px;
            right: 25px;
            height: 2px;
            background-color: #dee2e6;
            z-index: 1;
        }

        .step {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            font-weight: bold;
            color: #6c757d;
        }

        .step.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .step.completed {
            background-color: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        .business-type-card {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .business-type-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(0,102,204,0.1);
        }

        .business-type-card.selected {
            border-color: var(--primary-color);
            background-color: #f8f9ff;
        }

        .service-item {
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .service-item:hover {
            border-color: var(--primary-color);
        }

        .service-item.selected {
            border-color: var(--primary-color);
            background-color: #f8f9ff;
        }

        .customer-search {
            position: relative;
        }

        .customer-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 0 0 6px 6px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .customer-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #f8f9fa;
        }

        .customer-item:hover {
            background-color: #f8f9fa;
        }

        .order-summary {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .price-badge {
            background-color: #e3f2fd;
            color: #1976d2;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="bi bi-box-seam"></i> OneOrder - 客服接单管理
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text">客服: <strong id="current-staff">张客服</strong></span>
            </div>
        </div>
    </nav>

    <div class="container-fluid py-4">
        <!-- 步骤指示器 -->
        <div class="row mb-4">
            <div class="col-md-8 mx-auto">
                <div class="step-indicator">
                    <div class="text-center">
                        <div class="step active" id="step-1">1</div>
                        <div class="mt-2 small">选择客户</div>
                    </div>
                    <div class="text-center">
                        <div class="step" id="step-2">2</div>
                        <div class="mt-2 small">业务类型</div>
                    </div>
                    <div class="text-center">
                        <div class="step" id="step-3">3</div>
                        <div class="mt-2 small">选择服务</div>
                    </div>
                    <div class="text-center">
                        <div class="step" id="step-4">4</div>
                        <div class="mt-2 small">确认订单</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- 左侧主要操作区域 -->
            <div class="col-md-8">
                <!-- 步骤1: 客户选择 -->
                <div class="card mb-4" id="customer-selection-panel">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-person-search"></i> 第1步：选择客户
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="customer-search">
                            <input type="text" class="form-control" id="customer-search-input" 
                                   placeholder="输入客户名称或代码搜索..." autocomplete="off">
                            <div class="customer-dropdown" id="customer-dropdown">
                                <!-- 客户列表将通过JavaScript动态生成 -->
                            </div>
                        </div>
                        <div class="mt-3" id="selected-customer-info" style="display: none;">
                            <div class="alert alert-info">
                                <i class="bi bi-check-circle"></i> 
                                已选择客户: <strong id="selected-customer-name"></strong>
                                <span class="badge bg-primary ms-2" id="selected-customer-code"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 步骤2: 业务类型选择 -->
                <div class="card mb-4" id="business-type-panel" style="display: none;">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-diagram-3"></i> 第2步：选择业务类型
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row" id="business-types-container">
                            <!-- 业务类型卡片将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 步骤3: 服务选择 -->
                <div class="card mb-4" id="service-selection-panel" style="display: none;">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-list-check"></i> 第3步：选择服务项目
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="select-all-services">
                                <label class="form-check-label fw-bold" for="select-all-services">
                                    全选所有服务项目
                                </label>
                            </div>
                        </div>
                        <div id="available-services-container">
                            <!-- 可用服务项目将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 步骤4: 订单确认 -->
                <div class="card" id="order-confirmation-panel" style="display: none;">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-clipboard-check"></i> 第4步：确认订单信息
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>基本信息</h6>
                                <table class="table table-sm">
                                    <tr>
                                        <td>订单编号:</td>
                                        <td><span id="preview-order-no"></span></td>
                                    </tr>
                                    <tr>
                                        <td>客户:</td>
                                        <td><span id="preview-customer"></span></td>
                                    </tr>
                                    <tr>
                                        <td>业务类型:</td>
                                        <td><span id="preview-business-type"></span></td>
                                    </tr>
                                    <tr>
                                        <td>负责客服:</td>
                                        <td><span id="preview-staff"></span></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <h6>选择的服务项目 (<span id="preview-service-count">0</span>项)</h6>
                                <div id="preview-services-list"></div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button class="btn btn-success btn-lg" id="create-order-btn">
                                <i class="bi bi-check-circle"></i> 创建订单
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧订单摘要 -->
            <div class="col-md-4">
                <div class="card sticky-top" style="top: 20px;">
                    <div class="card-header">
                        <h6 class="card-title mb-0">
                            <i class="bi bi-file-text"></i> 订单摘要
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="order-summary">
                            <div class="mb-3">
                                <small class="text-muted">客户</small>
                                <div id="summary-customer">未选择</div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">业务类型</small>
                                <div id="summary-business-type">未选择</div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">选择的服务</small>
                                <div id="summary-services">0 项服务</div>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="fw-bold">预估总金额</span>
                                <span class="price-badge" id="summary-total-amount">¥0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 成功创建订单模态框 -->
    <div class="modal fade" id="success-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-check-circle-fill text-success"></i> 订单创建成功
                    </h5>
                </div>
                <div class="modal-body">
                    <p>订单已成功创建，系统已自动将您设置为订单负责人。</p>
                    <div class="alert alert-info">
                        <strong>订单编号:</strong> <span id="created-order-no"></span>
                    </div>
                    <p>接下来您可以：</p>
                    <ul>
                        <li>前往派单管理界面分配操作人员</li>
                        <li>查看订单详情和执行进度</li>
                        <li>继续创建新的订单</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">继续接单</button>
                    <a href="freight-order.html#assignment" class="btn btn-primary">去派单管理</a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 全局状态管理
        const appState = {
            currentStep: 1,
            selectedCustomer: null,
            selectedBusinessType: null,
            selectedServices: [],
            currentStaff: 'CS001' // 当前客服ID
        };

        // 模拟数据
        const mockData = {
            customers: [
                { id: 'CUS001', code: 'ACME', name: 'ACME物流有限公司', type: '货代公司' },
                { id: 'CUS002', code: 'GLOBE', name: '环球贸易集团', type: '贸易公司' },
                { id: 'CUS003', code: 'SWIFT', name: '迅捷供应链', type: '供应链公司' },
                { id: 'CUS004', code: 'OCEAN', name: '远洋国际货运', type: '货代公司' },
                { id: 'CUS005', code: 'SMART', name: '智慧物流科技', type: '物流科技公司' }
            ],
            businessTypes: [
                {
                    code: 'OCEAN',
                    name: '海运',
                    icon: 'bi-water',
                    description: '海上货物运输服务',
                    color: '#1976d2'
                },
                {
                    code: 'AIR',
                    name: '空运',
                    icon: 'bi-airplane',
                    description: '航空货物运输服务',
                    color: '#7b1fa2'
                },
                {
                    code: 'TRUCK',
                    name: '陆运',
                    icon: 'bi-truck',
                    description: '公路货物运输服务',
                    color: '#388e3c'
                },
                {
                    code: 'RAIL',
                    name: '铁运',
                    icon: 'bi-train-front',
                    description: '铁路货物运输服务',
                    color: '#f57c00'
                },
                {
                    code: 'CUSTOMS',
                    name: '关务',
                    icon: 'bi-shield-check',
                    description: '海关清关代理服务',
                    color: '#d32f2f'
                },
                {
                    code: 'WAREHOUSE',
                    name: '仓储',
                    icon: 'bi-building',
                    description: '仓储物流配送服务',
                    color: '#455a64'
                }
            ],
            services: {
                'OCEAN': [
                    { code: 'BOOKING', name: '订舱', description: '船舶舱位预订', price: 200, required: true },
                    { code: 'MBL_PROCESSING', name: 'MBL处理', description: '主提单制作处理', price: 1200, required: true },
                    { code: 'CONTAINER_LOADING', name: '内装', description: '集装箱装箱服务', price: 350, required: false },
                    { code: 'CUSTOMS_DECLARATION', name: '报关', description: '出口报关申报', price: 500, required: false },
                    { code: 'SHIPPING_INSURANCE', name: '货运保险', description: '海运货物保险', price: 150, required: false },
                    { code: 'WAREHOUSING', name: '仓储服务', description: '货物仓储管理', price: 300, required: false }
                ],
                'AIR': [
                    { code: 'AIR_BOOKING', name: '航空订舱', description: '航空舱位预订', price: 300, required: true },
                    { code: 'HAWB_PROCESSING', name: 'HAWB处理', description: '分运单制作', price: 800, required: true },
                    { code: 'AIR_CUSTOMS', name: '空运报关', description: '航空货物报关', price: 400, required: false },
                    { code: 'CARGO_INSPECTION', name: '货物查验', description: '货物安检查验', price: 200, required: false }
                ],
                'TRUCK': [
                    { code: 'TRUCK_TRANSPORT', name: '公路运输', description: '陆路货物运输', price: 600, required: true },
                    { code: 'LOADING_UNLOADING', name: '装卸服务', description: '货物装卸作业', price: 150, required: false },
                    { code: 'GPS_TRACKING', name: 'GPS跟踪', description: '运输过程跟踪', price: 50, required: false }
                ],
                'RAIL': [
                    { code: 'RAIL_TRANSPORT', name: '铁路运输', description: '铁路货物运输', price: 800, required: true },
                    { code: 'RAIL_CUSTOMS', name: '铁路报关', description: '铁路口岸报关', price: 350, required: false },
                    { code: 'CONTAINER_RAIL', name: '集装箱铁运', description: '集装箱铁路运输', price: 450, required: false }
                ],
                'CUSTOMS': [
                    { code: 'IMPORT_CUSTOMS', name: '进口报关', description: '进口货物报关', price: 600, required: true },
                    { code: 'EXPORT_CUSTOMS', name: '出口报关', description: '出口货物报关', price: 500, required: true },
                    { code: 'CUSTOMS_INSPECTION', name: '海关查验', description: '配合海关查验', price: 200, required: false },
                    { code: 'TAX_PAYMENT', name: '关税代缴', description: '代缴关税费用', price: 100, required: false }
                ],
                'WAREHOUSE': [
                    { code: 'STORAGE', name: '货物存储', description: '仓库货物存储', price: 250, required: true },
                    { code: 'INVENTORY_MANAGEMENT', name: '库存管理', description: '货物库存管理', price: 180, required: false },
                    { code: 'DISTRIBUTION', name: '配送服务', description: '最后一公里配送', price: 120, required: false },
                    { code: 'PACKAGING', name: '包装服务', description: '货物重新包装', price: 80, required: false }
                ]
            }
        };

        // 初始化应用
        function initApp() {
            initCustomerSearch();
            renderBusinessTypes();
            updateStepIndicator();
            updateOrderSummary();
        }

        // 客户搜索初始化
        function initCustomerSearch() {
            const searchInput = document.getElementById('customer-search-input');
            const dropdown = document.getElementById('customer-dropdown');

            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                if (query.length >= 2) {
                    const filteredCustomers = mockData.customers.filter(customer => 
                        customer.name.toLowerCase().includes(query) || 
                        customer.code.toLowerCase().includes(query)
                    );
                    renderCustomerDropdown(filteredCustomers);
                    dropdown.style.display = 'block';
                } else {
                    dropdown.style.display = 'none';
                }
            });

            // 点击外部关闭下拉框
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.customer-search')) {
                    dropdown.style.display = 'none';
                }
            });
        }

        // 渲染客户下拉列表
        function renderCustomerDropdown(customers) {
            const dropdown = document.getElementById('customer-dropdown');
            dropdown.innerHTML = customers.map(customer => `
                <div class="customer-item" onclick="selectCustomer('${customer.id}')">
                    <div class="fw-bold">${customer.name}</div>
                    <div class="small text-muted">${customer.code} · ${customer.type}</div>
                </div>
            `).join('');
        }

        // 选择客户
        function selectCustomer(customerId) {
            const customer = mockData.customers.find(c => c.id === customerId);
            if (customer) {
                appState.selectedCustomer = customer;
                
                // 更新界面
                document.getElementById('customer-search-input').value = customer.name;
                document.getElementById('customer-dropdown').style.display = 'none';
                document.getElementById('selected-customer-info').style.display = 'block';
                document.getElementById('selected-customer-name').textContent = customer.name;
                document.getElementById('selected-customer-code').textContent = customer.code;
                
                // 进入下一步
                nextStep();
            }
        }

        // 渲染业务类型
        function renderBusinessTypes() {
            const container = document.getElementById('business-types-container');
            container.innerHTML = mockData.businessTypes.map(type => `
                <div class="col-md-4">
                    <div class="business-type-card" onclick="selectBusinessType('${type.code}')">
                        <div class="text-center">
                            <i class="${type.icon}" style="font-size: 2rem; color: ${type.color};"></i>
                            <h6 class="mt-2 mb-1">${type.name}</h6>
                            <small class="text-muted">${type.description}</small>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 选择业务类型
        function selectBusinessType(typeCode) {
            const businessType = mockData.businessTypes.find(t => t.code === typeCode);
            if (businessType) {
                appState.selectedBusinessType = businessType;
                
                // 更新界面选中状态
                document.querySelectorAll('.business-type-card').forEach(card => {
                    card.classList.remove('selected');
                });
                event.currentTarget.classList.add('selected');
                
                // 渲染该业务类型的服务项目
                renderAvailableServices(typeCode);
                
                // 延迟进入下一步，让用户看到选中效果
                setTimeout(() => nextStep(), 500);
            }
        }

        // 渲染可用服务项目
        function renderAvailableServices(businessTypeCode) {
            const container = document.getElementById('available-services-container');
            const services = mockData.services[businessTypeCode] || [];
            
            container.innerHTML = services.map(service => `
                <div class="service-item" onclick="toggleService('${service.code}')">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="service-${service.code}">
                        <label class="form-check-label" for="service-${service.code}">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <div class="fw-bold">${service.name} ${service.required ? '<span class="badge bg-danger ms-1">必选</span>' : ''}</div>
                                    <div class="small text-muted">${service.description}</div>
                                </div>
                                <div class="price-badge">¥${service.price}</div>
                            </div>
                        </label>
                    </div>
                </div>
            `).join('');

            // 自动选择必选服务
            services.filter(s => s.required).forEach(service => {
                toggleService(service.code, true);
            });
        }

        // 切换服务选择
        function toggleService(serviceCode, forceSelect = false) {
            const checkbox = document.getElementById(`service-${serviceCode}`);
            const service = mockData.services[appState.selectedBusinessType.code].find(s => s.code === serviceCode);
            
            if (forceSelect || !checkbox.checked) {
                checkbox.checked = true;
                if (!appState.selectedServices.find(s => s.code === serviceCode)) {
                    appState.selectedServices.push(service);
                }
            } else {
                if (service.required) {
                    alert('必选服务不能取消选择');
                    return;
                }
                checkbox.checked = false;
                appState.selectedServices = appState.selectedServices.filter(s => s.code !== serviceCode);
            }
            
            updateOrderSummary();
            
            // 如果有选择的服务，允许进入下一步
            if (appState.selectedServices.length > 0) {
                // 可以考虑自动进入下一步或显示"继续"按钮
            }
        }

        // 全选服务
        document.getElementById('select-all-services').addEventListener('change', function() {
            const allServices = mockData.services[appState.selectedBusinessType.code] || [];
            if (this.checked) {
                allServices.forEach(service => toggleService(service.code, true));
            } else {
                // 只取消非必选服务
                allServices.filter(s => !s.required).forEach(service => {
                    const checkbox = document.getElementById(`service-${service.code}`);
                    checkbox.checked = false;
                    appState.selectedServices = appState.selectedServices.filter(sel => sel.code !== service.code);
                });
                updateOrderSummary();
            }
        });

        // 更新步骤指示器
        function updateStepIndicator() {
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`step-${i}`);
                if (i < appState.currentStep) {
                    step.className = 'step completed';
                } else if (i === appState.currentStep) {
                    step.className = 'step active';
                } else {
                    step.className = 'step';
                }
            }
        }

        // 进入下一步
        function nextStep() {
            if (appState.currentStep < 4) {
                appState.currentStep++;
                updateStepIndicator();
                showCurrentPanel();
                
                if (appState.currentStep === 4) {
                    renderOrderPreview();
                }
            }
        }

        // 显示当前步骤面板
        function showCurrentPanel() {
            // 隐藏所有面板
            document.getElementById('customer-selection-panel').style.display = 'none';
            document.getElementById('business-type-panel').style.display = 'none';
            document.getElementById('service-selection-panel').style.display = 'none';
            document.getElementById('order-confirmation-panel').style.display = 'none';
            
            // 显示当前步骤面板
            switch(appState.currentStep) {
                case 1:
                    document.getElementById('customer-selection-panel').style.display = 'block';
                    break;
                case 2:
                    document.getElementById('business-type-panel').style.display = 'block';
                    break;
                case 3:
                    document.getElementById('service-selection-panel').style.display = 'block';
                    break;
                case 4:
                    document.getElementById('order-confirmation-panel').style.display = 'block';
                    break;
            }
        }

        // 渲染订单预览
        function renderOrderPreview() {
            const orderNo = 'ON' + new Date().toISOString().replace(/[-:.]/g, '').slice(0, 14);
            
            document.getElementById('preview-order-no').textContent = orderNo;
            document.getElementById('preview-customer').textContent = appState.selectedCustomer.name;
            document.getElementById('preview-business-type').textContent = appState.selectedBusinessType.name;
            document.getElementById('preview-staff').textContent = '张客服';
            document.getElementById('preview-service-count').textContent = appState.selectedServices.length;
            
            const servicesList = document.getElementById('preview-services-list');
            servicesList.innerHTML = appState.selectedServices.map(service => `
                <div class="d-flex justify-content-between align-items-center py-1">
                    <span>${service.name}</span>
                    <span class="price-badge">¥${service.price}</span>
                </div>
            `).join('');
        }

        // 更新订单摘要
        function updateOrderSummary() {
            document.getElementById('summary-customer').textContent = 
                appState.selectedCustomer ? appState.selectedCustomer.name : '未选择';
            
            document.getElementById('summary-business-type').textContent = 
                appState.selectedBusinessType ? appState.selectedBusinessType.name : '未选择';
            
            document.getElementById('summary-services').textContent = 
                `${appState.selectedServices.length} 项服务`;
            
            const totalAmount = appState.selectedServices.reduce((sum, service) => sum + service.price, 0);
            document.getElementById('summary-total-amount').textContent = `¥${totalAmount.toFixed(2)}`;
        }

        // 创建订单
        document.getElementById('create-order-btn').addEventListener('click', async function() {
            const button = this;
            button.disabled = true;
            button.innerHTML = '<i class="bi bi-hourglass-split"></i> 创建中...';
            
            try {
                // 模拟API调用
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const orderNo = 'HCBD' + new Date().toISOString().replace(/[-:.]/g, '').slice(0, 14);
                document.getElementById('created-order-no').textContent = orderNo;
                
                // 显示成功模态框
                const modal = new bootstrap.Modal(document.getElementById('success-modal'));
                modal.show();
                
                // 重置表单
                resetForm();
                
            } catch (error) {
                alert('创建订单失败: ' + error.message);
            } finally {
                button.disabled = false;
                button.innerHTML = '<i class="bi bi-check-circle"></i> 创建订单';
            }
        });

        // 重置表单
        function resetForm() {
            appState.currentStep = 1;
            appState.selectedCustomer = null;
            appState.selectedBusinessType = null;
            appState.selectedServices = [];
            
            document.getElementById('customer-search-input').value = '';
            document.getElementById('selected-customer-info').style.display = 'none';
            
            updateStepIndicator();
            showCurrentPanel();
            updateOrderSummary();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>